<Window x:Class="KTruckGui.PartsForm"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Parts Management" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen">

    <!-- Window Resources -->
    <Window.Resources>
        <!-- Colors -->
        <Color x:Key="PrimaryColor">#3498db</Color>
        <Color x:Key="PrimaryDarkColor">#2c3e50</Color>
        <Color x:Key="PrimaryLightColor">#e8f6ff</Color>
        <Color x:Key="SecondaryColor">#2ecc71</Color>
        <Color x:Key="AccentColor">#e74c3c</Color>
        <Color x:Key="WarningColor">#f39c12</Color>
        <Color x:Key="WarningLightColor">#fff8e1</Color>
        <Color x:Key="LightGrayColor">#e9ecef</Color>
        <Color x:Key="ExtraLightGrayColor">#f8f9fa</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDarkColor}"/>
        <SolidColorBrush x:Key="PrimaryLightBrush" Color="{StaticResource PrimaryLightColor}"/>
        <SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>
        <SolidColorBrush x:Key="WarningLightBrush" Color="{StaticResource WarningLightColor}"/>
        <SolidColorBrush x:Key="LightGrayBrush" Color="{StaticResource LightGrayColor}"/>
        <SolidColorBrush x:Key="ExtraLightGrayBrush" Color="{StaticResource ExtraLightGrayColor}"/>

        <!-- Style for text headers -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkBrush}"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <!-- Style for section headers -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryDarkBrush}"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <!-- Style for form labels -->
        <Style x:Key="FormLabelStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Style for text boxes -->
        <Style x:Key="FormTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="{StaticResource LightGrayBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- Style for numeric text boxes -->
        <Style x:Key="NumericTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource FormTextBoxStyle}">
            <Setter Property="HorizontalContentAlignment" Value="Right"/>
        </Style>

        <!-- Style for buttons -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="35"/>
            <Setter Property="Padding" Value="15,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" 
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}"/>
                                <Setter Property="BorderBrush" Value="{StaticResource PrimaryDarkBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Style for warning color buttons -->
        <Style x:Key="WarningButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource WarningBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource WarningBrush}"/>
        </Style>

        <!-- Style for secondary action buttons -->
        <Style x:Key="SecondaryButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource SecondaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource SecondaryBrush}"/>
        </Style>

        <!-- Style for danger color buttons -->
        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource ActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
        </Style>

        <!-- Style for back/cancel buttons -->
        <Style x:Key="BackButtonStyle" TargetType="Button">
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="15,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Foreground" Value="#6c757d"/>
            <Setter Property="Background" Value="{StaticResource ExtraLightGrayBrush}"/>
            <Setter Property="BorderBrush" Value="#dee2e6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" 
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#dee2e6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource LightGrayBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="5"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="1" Direction="315" Color="#22000000" BlurRadius="5" Opacity="0.3"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource ExtraLightGrayBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header bar -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="HeaderText" Text="Add New Part" FontSize="22" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="PartStatusText" Text="Status: New" Foreground="White" VerticalAlignment="Center" Margin="0,0,15,0"/>
                    <CheckBox x:Name="ActiveCheckBox" Content="Active" Foreground="White" VerticalAlignment="Center" IsChecked="True"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main content - tabbed interface -->
        <TabControl Grid.Row="1" Margin="20" Background="White">
            <!-- Part Details Tab -->
            <TabItem Header="Part Details">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid Margin="20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left Column - Basic Information -->
                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                            <TextBlock Text="Basic Information" Style="{StaticResource SectionHeaderStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Part ID -->
                                <TextBlock Text="Part ID:" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="IDTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Part Name -->
                                <TextBlock Text="Part Name:" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="NameTextBox" Grid.Row="1" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Description -->
                                <TextBlock Text="Description:" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="DescriptionTextBox" Grid.Row="2" Grid.Column="1" 
                                         Style="{StaticResource FormTextBoxStyle}" 
                                         Height="80" 
                                         TextWrapping="Wrap" 
                                         AcceptsReturn="True"
                                         VerticalContentAlignment="Top"
                                         VerticalScrollBarVisibility="Auto"/>

                                <!-- Part Location -->
                                <TextBlock Text="Storage Location:" Grid.Row="3" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="LocationTextBox" Grid.Row="3" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Manufacturer -->
                                <TextBlock Text="Manufacturer:" Grid.Row="4" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="ManufacturerTextBox" Grid.Row="4" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Price & Quantity Section Heading -->
                                <TextBlock Text="Pricing Information" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2" 
                                           Style="{StaticResource SectionHeaderStyle}" Margin="0,20,0,10"/>
                            </Grid>

                            <!-- Pricing Grid -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Unit Cost -->
                                <TextBlock Text="Unit Cost:" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="UnitPriceTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>

                                <!-- Selling Price -->
                                <TextBlock Text="Selling Price:" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="PriceTextBox" Grid.Row="1" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>

                                <!-- Market Price -->
                                <TextBlock Text="Market Price:" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="MarketPriceTextBox" Grid.Row="2" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>
                            </Grid>
                        </StackPanel>

                        <!-- Right Column - Inventory & Supplier Information -->
                        <StackPanel Grid.Column="1" Margin="20,0,0,0">
                            <TextBlock Text="Inventory Management" Style="{StaticResource SectionHeaderStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Current Quantity -->
                                <TextBlock Text="Current Quantity:" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="QuantityTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>

                                <!-- Minimum Stock Level -->
                                <TextBlock Text="Min Stock Level:" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="MinStockTextBox" Grid.Row="1" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>

                                <!-- Reorder Quantity -->
                                <TextBlock Text="Reorder Quantity:" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="ReorderTextBox" Grid.Row="2" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>

                                <!-- Supplier Section Heading -->
                                <TextBlock Text="Supplier Information" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                                           Style="{StaticResource SectionHeaderStyle}" Margin="0,20,0,10"/>
                            </Grid>

                            <!-- Supplier Grid -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Primary Supplier -->
                                <TextBlock Text="Primary Supplier:" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="SupplierTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Vendor -->
                                <TextBlock Text="Vendor Code:" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="VendorTextBox" Grid.Row="1" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                <!-- Lead Time -->
                                <TextBlock Text="Lead Time (days):" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                <TextBox x:Name="LeadTimeTextBox" Grid.Row="2" Grid.Column="1" Style="{StaticResource NumericTextBoxStyle}"/>
                            </Grid>

                            <!-- Inventory Status Card -->
                            <Border Style="{StaticResource CardStyle}" Margin="0,20,0,0" Background="{StaticResource WarningLightBrush}">
                                <StackPanel>
                                    <TextBlock Text="Inventory Status" Style="{StaticResource SectionHeaderStyle}"/>
                                    <TextBlock x:Name="StockStatusText" Text="Below minimum stock level! Reorder advised." 
                                               Foreground="{StaticResource WarningBrush}" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                    <Button Content="Generate Purchase Order" Style="{StaticResource WarningButtonStyle}" 
                                            HorizontalAlignment="Left" Click="GeneratePurchaseOrder_Click"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- Purchase Orders Tab -->
            <TabItem Header="Purchase Orders">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Header and Actions -->
                    <Grid Grid.Row="0" Margin="0,0,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Purchase Order History" Style="{StaticResource HeaderTextStyle}"/>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button Content="Upload PO" Style="{StaticResource ActionButtonStyle}" Click="UploadPDF_Click"/>
                        </StackPanel>
                    </Grid>

                    <!-- Purchase Order List -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>

                        <!-- PO List -->
                        <DataGrid x:Name="PurchaseOrdersDataGrid" Grid.Column="0" Margin="0,0,10,0" 
                                  AutoGenerateColumns="False" IsReadOnly="True" HeadersVisibility="Column"
                                  SelectionMode="Single" SelectionChanged="PurchaseOrdersDataGrid_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="PO Number" Binding="{Binding PONumber}" Width="120"/>
                                <DataGridTextColumn Header="Date" Binding="{Binding DateAdded, StringFormat=\{0:MM/dd/yyyy\}}" Width="100"/>
                                <DataGridTextColumn Header="Supplier" Binding="{Binding Supplier}" Width="180"/>
                                <DataGridTextColumn Header="Filename" Binding="{Binding Filename}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- Preview & Actions -->
                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                            <Border Style="{StaticResource CardStyle}" MinHeight="200" Margin="0,0,0,10">
                                <Grid>
                                    <TextBlock Text="PO Preview" FontWeight="SemiBold" HorizontalAlignment="Center" VerticalAlignment="Center"
                                               Foreground="{StaticResource LightGrayBrush}" FontSize="16"/>
                                    <!-- PDF Preview would go here in a real implementation -->
                                </Grid>
                            </Border>

                            <Button Content="View Purchase Order" Style="{StaticResource ActionButtonStyle}" Margin="5" Click="ViewPDF_Click"/>
                            <Button Content="Delete Purchase Order" Style="{StaticResource DangerButtonStyle}" Margin="5" Click="DeletePDF_Click"/>
                        </StackPanel>
                    </Grid>

                    <!-- New Purchase Order Form -->
                    <Expander Grid.Row="2" Header="Create New Purchase Order" Margin="0,15,0,0">
                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left side - PO Details -->
                            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                <TextBlock Text="Purchase Order Details" Style="{StaticResource SectionHeaderStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- PO Number -->
                                    <TextBlock Text="PO Number:" Grid.Row="0" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                    <TextBox x:Name="PONumberTextBox" Grid.Row="0" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                    <!-- Date -->
                                    <TextBlock Text="Date:" Grid.Row="1" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                    <DatePicker x:Name="PODatePicker" Grid.Row="1" Grid.Column="1" Margin="0,0,0,10" Height="35"/>

                                    <!-- Supplier -->
                                    <TextBlock Text="Supplier:" Grid.Row="2" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                    <TextBox x:Name="POSupplierTextBox" Grid.Row="2" Grid.Column="1" Style="{StaticResource FormTextBoxStyle}"/>

                                    <!-- Notes -->
                                    <TextBlock Text="Notes:" Grid.Row="3" Grid.Column="0" Style="{StaticResource FormLabelStyle}"/>
                                    <TextBox x:Name="PONotesTextBox" Grid.Row="3" Grid.Column="1" 
                                             Style="{StaticResource FormTextBoxStyle}" 
                                             Height="80" 
                                             TextWrapping="Wrap" 
                                             AcceptsReturn="True"
                                             VerticalContentAlignment="Top"
                                             VerticalScrollBarVisibility="Auto"/>
                                </Grid>
                            </StackPanel>

                            <!-- Right side - Order Items -->
                            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock Text="Order Items" Style="{StaticResource SectionHeaderStyle}"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="2*"/>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="1*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBox x:Name="ItemDescriptionTextBox" Grid.Column="0" Margin="0,0,5,0" 
                                             Height="35" VerticalContentAlignment="Center" Padding="10,0"
                                             Text="{Binding ElementName=NameTextBox, Path=Text, Mode=OneWay}"/>

                                    <TextBox x:Name="ItemQuantityTextBox" Grid.Column="1" Margin="0,0,5,0" 
                                             Height="35" VerticalContentAlignment="Center" Padding="10,0" 
                                             Text="{Binding ElementName=ReorderTextBox, Path=Text, Mode=OneWay}"
                                             HorizontalContentAlignment="Right"/>

                                    <TextBox x:Name="ItemPriceTextBox" Grid.Column="2" Margin="0,0,5,0" 
                                             Height="35" VerticalContentAlignment="Center" Padding="10,0" 
                                             Text="{Binding ElementName=UnitPriceTextBox, Path=Text, Mode=OneWay}"
                                             HorizontalContentAlignment="Right"/>

                                    <Button Grid.Column="3" Content="Add" Height="35" Width="60" 
                                            Style="{StaticResource SecondaryButtonStyle}"/>
                                </Grid>

                                <!-- Item list -->
                                <ListBox x:Name="POItemsListBox" Height="150" Margin="0,10,0,10">
                                    <ListBoxItem>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Sample Item Description" Width="240"/>
                                            <TextBlock Text="10" Width="80" TextAlignment="Right"/>
                                            <TextBlock Text="$24.99" Width="80" TextAlignment="Right"/>
                                            <TextBlock Text="$249.90" Width="80" TextAlignment="Right"/>
                                        </StackPanel>
                                    </ListBoxItem>
                                </ListBox>

                                <!-- Totals -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Total:" Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" FontWeight="Bold"/>
                                    <TextBlock Text="$249.90" Grid.Row="0" Grid.Column="1" Width="80" TextAlignment="Right" FontWeight="Bold"/>

                                    <Button Content="Generate Purchase Order" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                            Margin="0,15,0,0" HorizontalAlignment="Right" Style="{StaticResource SecondaryButtonStyle}"/>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Expander>
                </Grid>
            </TabItem>

            <!-- Usage History Tab -->
            <TabItem Header="Usage History">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <TextBlock Text="Part Usage History" Style="{StaticResource HeaderTextStyle}" Grid.Row="0"/>

                    <!-- Usage DataGrid -->
                    <DataGrid Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=\{0:MM/dd/yyyy\}}" Width="100"/>
                            <DataGridTextColumn Header="Work Order" Binding="{Binding WorkOrderId}" Width="120"/>
                            <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="180"/>
                            <DataGridTextColumn Header="Vehicle" Binding="{Binding VehicleInfo}" Width="180"/>
                            <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" Width="80"/>
                            <DataGridTextColumn Header="Technician" Binding="{Binding Technician}" Width="150"/>
                            <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Footer with action buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,0,20,20">
            <Button Content="Cancel" Width="100" Height="40" Style="{StaticResource BackButtonStyle}" Click="CancelButton_Click"/>
            <Button Content="Save" Width="100" Height="40" Style="{StaticResource ActionButtonStyle}" Click="SaveButton_Click"/>
        </StackPanel>
    </Grid>
</Window>